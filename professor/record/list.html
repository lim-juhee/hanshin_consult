<!DOCTYPE html>
  <!-- <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  </head> -->
  <body>
 
      <div data-role="page" id ="p_record_list">
        <div data-role="header" data-position="fixed" data-add-back-btn="true">
          <h1>상담 기록 내역</h1>
        </div>
       
        <div data-role="content" class="ui-content">
          <ul data-role="listview" data-filter="true" data-filter-placeholder="검색어를 입력하세요" data-inset="true" id="p-record-list" class="ui-nodisc-icon ui-alt-icon">
          </ul>
          
        </div>

        <script type="text/javascript">
          $(document).on("pageshow", function(){
            var mockdata = [{
              student : "임주희"
              ,department : "컴퓨터공학부"
              ,type : "개인상담"
              ,date : "2016-5-18"
              ,time : "17:00"
              ,url : "../../assets/img/profile.png"
            },{student : "장하은"
              ,department : "컴퓨터공학부"
              ,type : "진로상담"
              ,date : "2016-5-20"
              ,time : "13:20"
              ,url : "../../assets/img/profile.png"
            },{student : "종합설계_8조상담하시조"
              ,department : "컴퓨터공학부"
              ,type : "종합설계"
              ,date : "2016-6-1"
              ,time : "15:45"
              ,url : "../../../assets/img/profile.png"
            }];

            refreshConsultList(mockdata, "#p-record-list")
          });


          // 리스트를 새로고침하는 함수, 데이터 배열을 받아와 매개변수로 사용
          // arr 은 데이터 배열, el은 id 
          // [{
          //    student : "임주희"
          //    ,department : "컴퓨터공학부"
          //    ,type : "개인상담"
          //    ,date : 2016-5-18
          //    ,time : 17:00
          // }, ...]
          function refreshConsultList(arr,el){
            $(el).empty(); // refresh. 내부 아이템 모두 삭제

            for(var i = 0, len = arr.length; i < len; i++){
              var data = arr[i];
              var li = createListItem(data);
              $(el).append(li).listview("refresh");
            }

          }

          // 리스트 아이템을 생성하는 함수. append는 안함
          // data는 객체
          // {
          //    student : "임주희"
          //    ,department : "컴퓨터공학부"
          //    ,type : "개인상담"
          //    ,date : 2016-5-18
          //    ,time : 17:00
          // }
          function createListItem(data){
            var li = document.createElement("li");
            $(li).html([
               '<a href="record.html">'
               , listItemStrFormat(data)
               ,'</a>'
            ].join("")); 

            return li;
          }

          // 학과명, 교수명, 과목이름을 포맷에 맞게 조합하는 함수
          // data는 객체
          // {
          //    student : "임주희"
          //    ,department : "컴퓨터공학부"
          //    ,type : "개인상담"
          //    ,date : 2016-5-18
          //    ,time : 17:00
          // }
          function listItemStrFormat(data) {
            return ['<img src=',data.url,'>',
              '<h2>',data.student,' ',data.type,'</h2>',
              '<p>', data.date,'</p>',].join("");
          }


        </script>

      </div> 
  </body>
</html>