<!DOCTYPE html>
  <!-- <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  </head> -->
  <body>
 
      <div data-role="page" id ="s_free_list">
        <div data-role="header" data-position="fixed" data-add-back-btn="true">
          <h1>자율 상담 신청 현황</h1>
          <a href ="request.html" class="ui-btn ui-btn-right">신청하기</a>
        </div>
       
        <div data-role="content" class="ui-content">

          <ul data-role="listview" data-filter="true" data-filter-placeholder="검색어를 입력하   " data-inset="true" id="s-free-list" class="ui-nodisc-icon ui-alt-icon">
           
          </ul>
          
          <!-- <a href ="request.html" id="floatting_btn" class="ui-btn">신청하기</a>  -->
        </div>

        <script type="text/javascript">
        //임시데이터
          $(document).on("pageshow", function(){
            var mockdata = [{
              professor : "박성진"
              ,department : "컴퓨터공학부"
              ,type : "종합설계 상담"
              ,date : "2017-05-20"
              ,time : "17:30"
            },{professor : "최창원"
              ,department : "컴퓨터공학부"
              ,type : "개인상담"
              ,date : "2017-05-21"
              ,time : "17:30"
            },{professor : "이형우"
              ,department : "컴퓨터공학부"
              ,type : "성적 상담"
              ,date : "미승인"
              ,time : "null"
            }];

            refreshConsultList(mockdata, "#s-free-list")
          });

   
          // 리스트를 새로고침하는 함수, 데이터 배열을 받아와 매개변수로 사용
          // arr 은 데이터 배열, el은 id 
          // [{
          //    date      :"2017-05-20"
          //    ,time     :"17:30"
          //    ,professor : "박성진"
          //    ,department : "컴퓨터공학부"
          // }, ...]
          function refreshConsultList(arr,el){
            $(el).empty(); // refresh. 내부 아이템 모두 삭제

            for(var i = 0, len = arr.length; i < len; i++){
              var data = arr[i];
              var li = createListItem(data);
              $(el).append(li).listview("refresh");
            }

          }


          // 리스트 아이템을 생성하는 함수. append는 안함
          // data는 객체
          // {
          //    date      :"2017-05-20"
          //    ,time     :"17:30"
          //    ,professor : "박성진"
          //    ,department : "컴퓨터공학부"
          // }
          function createListItem(data){
            var li = document.createElement("li");
            $(li).html([
               '<a href="detail.html">'
               , listItemStrFormat(data)
               ,'</a>'
            ].join("")); 

            return li;
          }

          // 날짜, 시간, 교수, 학과명을 포맷에 맞게 조합하는 함수
          // data는 객체
          // {
          //    date      :"2017-05-20"
          //    ,time     :"17:30"
          //    ,professor : "박성진"
          //    ,department : "컴퓨터공학부"
          // }
         function listItemStrFormat(data) {
            return [
                '<h2>',data.professor,' ',data.type,'</h2>',
                '<p>', data.date,'</p>'].join("");
          }


        </script>

      </div> 
  </body>
</html>